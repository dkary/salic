---
title: "Prepare License Table"
date: '`r strftime(Sys.time(), format = "%B %d, %Y")`'
output: 
    html_document:
        toc: true
        toc_float: true
        code_folding: show
---

```{r setup, message=FALSE}
library(dplyr)
library(tidyr)
knitr::opts_chunk$set(comment = NA)
```

## Guidelines

- The goal is to categorize licenses according to `type` (hunt, fish, combo, trap)
    + This allows overall hunter/angler metrics to be checked in 2-check-initial.Rmd (e.g., count by year, churn, etc.)

## Load

```{r}
db <- src_sqlite("~/Data/") # path to raw sqlite db
src_tbls(db)

lic_raw <- tbl(db, "lic") %>% collect()
glimpse(lic_raw)
```

## Prep

- Preparation is sometimes needed to insure:
    + one `lic_id` per row in output license table
    + `lic_id` uniquely identifies license types across all license years

```{r}
lic <- lic_raw
```

## Write to csv

- Writing an output table to csv allows license categorizations to be done in Excel

```{r}
write.csv(lic, file = "../../data/1-prep-license-data/lic_types.csv", 
          row.names = FALSE)
```

